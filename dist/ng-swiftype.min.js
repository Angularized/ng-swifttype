angular.module("ngSwiftype",[]),angular.module("ngSwiftype").factory("ngSwiftype.cache",["$cacheFactory",function(e){return e("cache")}]),angular.module("ngSwiftype").directive("swiftypeAutocomplete",["ngSwiftype.api",function(e){var t=["$scope",function(t){function n(e){var n=e.data.info,i=e.data.records,r=0;for(var s in n)t.results[s]=n[s],t.results[s].records=i[s],r+=n[s].total_result_count;t.results.record_count=r,t.loading=!1}function i(i,s){t.loading=!0,r.q=t.term,r.engine_key=t.engine_key,r.per_page=t.limits,r.fetch_fields=t.fetch_fields,r.search_fields=t.search_fields,r.filters=t.filters,r.page=i,e.search(r).then(n)}t.results={},t.error={},t.loading=!1;var r={};t.search_by=function(e,t){i(e,t)},t.keyup=function(e){var n=e.keyCode||e.which;return n>36&&41>n||16==n?!1:void(t.term&&t.term.length>2?i(t.page):(t.results={},t.$apply()))}}];return{restrict:"CE",controller:t,link:function(e,t,n){return n.engineKey?(e.engine_key=n.engineKey,e.limits=n.limits,n.fetchFields&&(e.fetch_fields=JSON.parse(n.fetchFields)),void t.bind("keyup",e.keyup)):(e.error={statusText:"Missing engine key"},!1)}}}]),angular.module("ngSwiftype").service("ngSwiftype.api",["$http","ngSwiftype.cache",function(e,t){var n="https://api.swiftype.com/api/v1/public/engines/suggest.json";this.search=function(i){if(!i&&"object"!=typeof i)return!1;var r={};return r.q=i.q,r.engine_key=i.engine_key,r.page=i.page||1,r.per_page=i.per_page||20,r.search_fields=i.search_fields,r.fetch_fields=i.fetch_fields,r.filters=i.filters,r.document_types=i.document_types,r.functional_boosts=i.functional_boosts,r.sort_field=i.sort_field,r.sort_direction=i.sort_direction,e({method:"POST",url:n,data:r,headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(e){var t=JSON.stringify(e);return t},cache:t})}}]);
//# sourceMappingURL=ng-swiftype.min.js.map